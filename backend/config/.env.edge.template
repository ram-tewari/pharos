# Edge Worker Configuration Template (Local GPU)
# Copy this file to .env.edge and fill in your credentials
# Run locally with: python worker.py

# ============================================================================
# DEPLOYMENT MODE
# ============================================================================
MODE=EDGE

# ============================================================================
# TASK QUEUE (Upstash Redis) - REQUIRED
# ============================================================================
# Get these from: https://console.upstash.com/redis
# MUST match Cloud API configuration
UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token-here

# ============================================================================
# VECTOR DATABASE (Qdrant Cloud) - REQUIRED
# ============================================================================
# Get these from: https://cloud.qdrant.io
# MUST match Cloud API configuration
QDRANT_URL=https://your-cluster.qdrant.io
QDRANT_API_KEY=your-qdrant-api-key-here

# ============================================================================
# WORKER CONFIGURATION
# ============================================================================
# Polling interval in seconds (how often to check for new tasks)
WORKER_POLL_INTERVAL=2

# Task TTL in seconds (24 hours = 86400)
# Tasks older than this are skipped
TASK_TTL_SECONDS=86400

# ============================================================================
# GPU CONFIGURATION
# ============================================================================
# Device is auto-detected (cuda if available, else cpu)
# No manual configuration needed
# Worker will log GPU information on startup

# ============================================================================
# OPTIONAL: Database Access (if needed for metadata)
# ============================================================================
# Uncomment if edge worker needs database access
# NEON_DATABASE_URL=postgresql://user:password@ep-xxx.neon.tech/neondb
# DATABASE_URL=${NEON_DATABASE_URL}

# ============================================================================
# NOTES
# ============================================================================
# - Edge Worker runs locally on your laptop/desktop
# - Requires NVIDIA GPU with CUDA support (RTX 4070 or better recommended)
# - Falls back to CPU if CUDA unavailable (slower)
# - Requires full ML dependencies: pip install -r requirements-edge.txt
# - Worker polls Redis queue every WORKER_POLL_INTERVAL seconds
# - Processes one repository at a time
# - Updates status in Redis for monitoring
# - Cleans up temporary files after each job
#
# HARDWARE REQUIREMENTS:
# - CPU: Intel i9 or equivalent (8+ cores recommended)
# - GPU: NVIDIA RTX 4070 or better (16GB VRAM)
# - RAM: 16GB minimum, 32GB recommended
# - Storage: 50GB free space for repositories and models
# - Network: Stable internet connection for Redis/Qdrant
#
# STARTUP:
# 1. Install dependencies: pip install -r requirements-edge.txt
# 2. Copy this template: cp .env.edge.template .env.edge
# 3. Fill in credentials (must match cloud configuration)
# 4. Run worker: python worker.py
# 5. Worker will log GPU info and start polling queue
